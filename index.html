<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual Agencias Novanet - FIFLP</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel para JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Estilos de animación personalizados -->
    <style>
        @keyframes bounce-in {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-bounce-in { animation: bounce-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        /* Scrollbar personalizado */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #ccc; border-radius: 3px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #bbb; }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- DEFINICIÓN DE ICONOS (Lucide Mock) ---
        const IconBase = ({ children, size = 24, className = "", ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                {children}
            </svg>
        );

        const User = (p) => <IconBase {...p}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconBase>;
        const Users = (p) => <IconBase {...p}><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></IconBase>;
        const FileText = (p) => <IconBase {...p}><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></IconBase>;
        const Search = (p) => <IconBase {...p}><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></IconBase>;
        const Plus = (p) => <IconBase {...p}><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></IconBase>;
        const Save = (p) => <IconBase {...p}><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></IconBase>;
        const Upload = (p) => <IconBase {...p}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></IconBase>;
        const Trash2 = (p) => <IconBase {...p}><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></IconBase>;
        const Edit = (p) => <IconBase {...p}><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></IconBase>;
        const Eye = (p) => <IconBase {...p}><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></IconBase>;
        const Download = (p) => <IconBase {...p}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></IconBase>;
        const CheckCircle = (p) => <IconBase {...p}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>;
        const AlertCircle = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></IconBase>;
        const Euro = (p) => <IconBase {...p}><path d="M4 10h12"/><path d="M4 14h9"/><path d="M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2"/></IconBase>;
        const Menu = (p) => <IconBase {...p}><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></IconBase>;
        const ChevronRight = (p) => <IconBase {...p}><polyline points="9 18 15 12 9 6"/></IconBase>;
        const Home = (p) => <IconBase {...p}><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></IconBase>;
        const Settings = (p) => <IconBase {...p}><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></IconBase>;
        const Copy = (p) => <IconBase {...p}><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></IconBase>;
        const Plane = (p) => <IconBase {...p}><path d="M2 12h20"/><path d="M13 2l9 10-9 10"/><path d="M2 12l5-5m0 10l-5-5"/></IconBase>; // Simplified as arrow, replacing with better plane
        const PlaneReal = (p) => <IconBase {...p}><path d="M2 22h20"/><path d="M13 6l7 7-3 2"/><path d="M9 13L2 15l2 2 9-2 5 2 3-5-10-8z"/></IconBase>;
        const Info = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></IconBase>;
        const Bell = (p) => <IconBase {...p}><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></IconBase>;
        const X = (p) => <IconBase {...p}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></IconBase>;
        const Award = (p) => <IconBase {...p}><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></IconBase>;
        const PlayCircle = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></IconBase>;
        const Book = (p) => <IconBase {...p}><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></IconBase>;
        const HelpCircle = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></IconBase>;
        const Shield = (p) => <IconBase {...p}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></IconBase>;

        // --- ESTILOS CORPORATIVOS FIFLP/NOVANET ---
        const COLORS = {
            fiflpYellow: 'bg-[#F9B000]',
            fiflpYellowText: 'text-[#F9B000]',
            headerBlue: 'text-[#00549F]',
            btnGreen: 'bg-[#478945]',
            btnGreenHover: 'hover:bg-[#386c36]',
            btnDarkGray: 'bg-[#555555]',
            tableHeader: 'bg-[#F0AD4E]',
            inputMandatory: 'bg-[#FADBD8]',
            tabActive: 'bg-[#F0AD4E] text-white',
            tabInactive: 'bg-[#F5F5F5] text-gray-600',
        };

        // --- COMPONENTE TOAST ---
        const Toast = ({ message, type, onClose }) => {
            useEffect(() => {
                const timer = setTimeout(onClose, 3000);
                return () => clearTimeout(timer);
            }, [onClose]);

            const bgColors = { success: 'bg-green-600', info: 'bg-blue-600', warning: 'bg-amber-500', error: 'bg-red-500' };

            return (
                <div className={`fixed bottom-4 right-4 ${bgColors[type] || 'bg-gray-800'} text-white px-4 py-3 rounded shadow-xl flex items-center space-x-2 animate-bounce-in z-50 text-sm`}>
                    {type === 'success' && <CheckCircle size={16} />}
                    {type === 'warning' && <AlertCircle size={16} />}
                    {type === 'error' && <AlertCircle size={16} />}
                    <span className="font-medium">{message}</span>
                    <button onClick={onClose} className="ml-2 hover:text-gray-200"><X size={14}/></button>
                </div>
            );
        };

        // --- COMPONENTE CELEBRACIÓN ---
        const CelebrationOverlay = ({ onDismiss }) => (
            <div className="absolute inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-sm animate-fade-in" onClick={onDismiss}>
                <div className="bg-white p-6 rounded-lg shadow-2xl transform scale-110 text-center border-t-4 border-[#F9B000]">
                    <Award size={64} className="mx-auto text-[#F9B000] mb-4 animate-bounce" />
                    <h2 className="text-2xl font-bold text-gray-800">¡Sección Completada!</h2>
                    <p className="text-gray-600 mt-2 text-sm">Has seguido correctamente el flujo del manual.</p>
                    <button className="mt-4 bg-[#00549F] text-white px-6 py-2 rounded font-bold hover:bg-blue-800 text-sm">Continuar</button>
                </div>
            </div>
        );

        // --- COMPONENTE LOGO RECREADO ---
        const FCFLogo = () => (
            <div className="flex items-center space-x-3 select-none">
                <div className="flex items-baseline font-black italic tracking-tighter" style={{ fontFamily: 'Arial, sans-serif' }}>
                    <span className="text-3xl text-white drop-shadow-[1px_1px_0_#000] mr-[-2px]" style={{ WebkitTextStroke: '1px black' }}>F</span>
                    <span className="text-4xl text-[#00549F] mr-[-2px]">C</span>
                    <span className="text-4xl text-[#F9B000]">F<span className="text-[#C0392B] text-xl">.</span></span>
                </div>
                <div className="relative w-10 h-10">
                    <div className="absolute inset-0 border-2 border-[#003366] transform rotate-180" style={{ clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)' }}></div>
                    <div className="absolute inset-0 flex items-center justify-center pt-2">
                        <span className="text-[#003366] font-bold text-[8px] tracking-widest transform -rotate-12">FIFLP</span>
                    </div>
                </div>
                <div className="hidden lg:flex flex-col text-[8px] font-bold text-[#003366] leading-tight uppercase border-l border-gray-400 pl-2">
                    <span>Federación</span><span>Interinsular</span><span>de Fútbol</span><span>de Las Palmas</span>
                </div>
            </div>
        );

        // --- COMPONENTES KNOWLEDGE BASE ---
        const RoleBadge = ({ role }) => (
            <div className={`inline-flex items-center px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider mb-2 ${role === 'Federación' ? 'bg-purple-100 text-purple-700 border border-purple-200' : 'bg-blue-100 text-blue-700 border border-blue-200'}`}>
                <Shield size={10} className="mr-1"/> Rol: {role}
            </div>
        );

        const BusinessRule = ({ title, rules }) => (
            <div className="bg-amber-50 border-l-4 border-amber-400 p-3 rounded-r-md my-4 shadow-sm">
                <h4 className="text-amber-800 text-xs font-bold flex items-center uppercase mb-2"><Info size={12} className="mr-1"/> Reglas de Negocio</h4>
                <ul className="list-disc list-inside text-xs text-amber-900 space-y-1">
                    {rules.map((rule, idx) => <li key={idx}>{rule}</li>)}
                </ul>
            </div>
        );

        const FAQItem = ({ question, answer }) => {
            const [isOpen, setIsOpen] = useState(false);
            return (
                <div className="border-b border-gray-100 last:border-0">
                    <button onClick={() => setIsOpen(!isOpen)} className="w-full text-left py-2 flex justify-between items-center text-xs font-bold text-gray-700 hover:text-blue-600 focus:outline-none">
                        {question}
                        <ChevronRight size={12} className={`transform transition-transform ${isOpen ? 'rotate-90' : ''}`}/>
                    </button>
                    {isOpen && <p className="text-[11px] text-gray-600 pb-2 pl-2 animate-fade-in">{answer}</p>}
                </div>
            );
        };

        // --- COMPONENTE PRINCIPAL ---
        const ManualAgencias = () => {
            const [activeSection, setActiveSection] = useState('intro');
            const [completedSections, setCompletedSections] = useState(new Set());
            const [showCelebration, setShowCelebration] = useState(false);
            const [toast, setToast] = useState(null);
            const [searchQuery, setSearchQuery] = useState('');

            // Estados Simulador
            const [activeTab, setActiveTab] = useState('datos'); 
            const [activeRequestTab, setActiveRequestTab] = useState('jugadores'); 
            const [formAgencia, setFormAgencia] = useState({ nombre: 'Agencia Pruebas II', telefono: '678554433', cif: 'B55355533', email: 'pruebas@novanet.es', cuenta: '12345678909876543211', isSaved: false });
            const [solicitudStatus, setSolicitudStatus] = useState('Pte. Val. Técnica');
            const [validacionAction, setValidacionAction] = useState('Validar'); 
            const [remesaItems, setRemesaItems] = useState([
                { id: 50, club: 'C.D. SAN ANDRES', local: 'C.D. SAN ANDRES', visitante: 'AT. PERDOMA', importe: 476, selected: false, status: 'Pte. Pago' },
                { id: 60, club: 'C.D. Valle Guerra', local: 'C.D. Valle Guerra', visitante: 'TACORONTE C.F.', importe: 973, selected: false, status: 'Pte. Pago' }
            ]);

            const showToast = (message, type = 'success') => setToast({ message, type });
            
            const markComplete = (section) => {
                if (!completedSections.has(section)) {
                    const newSet = new Set(completedSections);
                    newSet.add(section);
                    setCompletedSections(newSet);
                    setShowCelebration(true);
                    setTimeout(() => setShowCelebration(false), 2500);
                }
            };

            // --- LOGICA DE NAVEGACION Y BUSQUEDA ---
            const menuItems = [
                { id: 'intro', label: 'Inicio', icon: Home, tags: ['intro', 'bienvenida'] },
                { id: 'agencia_alta', label: 'Gestión de Agencias', icon: Users, tags: ['alta', 'crear', 'clubes', 'documentos'] },
                { id: 'solicitudes_crear', label: 'Crear Solicitud', icon: PlaneReal, tags: ['viaje', 'jugadores', 'tarifas', 'avión'] },
                { id: 'federacion_validacion', label: 'Validación Fed.', icon: CheckCircle, tags: ['estados', 'validar', 'subsanar', 'rechazar'] },
                { id: 'remesas', label: 'Remesas y Pagos', icon: Euro, tags: ['pago', 'factura', 'contabilidad', 'excel'] }
            ];

            const filteredMenu = menuItems.filter(item => 
                item.label.toLowerCase().includes(searchQuery.toLowerCase()) || 
                item.tags.some(tag => tag.includes(searchQuery.toLowerCase()))
            );

            // --- ACCIONES SIMULADAS ---
            const handleAgenciaChange = (e) => setFormAgencia({ ...formAgencia, [e.target.name]: e.target.value });
            const handleSaveAgencia = () => {
                if (!formAgencia.nombre || !formAgencia.cif || !formAgencia.telefono) { showToast('Error: Rellene campos obligatorios (rojo).', 'error'); return; }
                setFormAgencia({ ...formAgencia, isSaved: true });
                showToast('Agencia grabada. Habilitada subida de documentos.', 'success');
            };
            const handleUploadDocs = () => {
                if(!formAgencia.isSaved) { showToast('Debe Grabar la agencia antes de subir documentos.', 'warning'); return; }
                showToast('Documentos subidos correctamente.', 'success'); markComplete('agencia_alta');
            };
            const handleValidate = () => {
                if (validacionAction === 'Subsanar') { setSolicitudStatus('Subsanación'); showToast('Estado: Subsanación.', 'warning'); return; }
                if (validacionAction === 'Rechazar') { setSolicitudStatus('Rechazado'); showToast('Estado: Rechazado.', 'error'); return; }
                if (solicitudStatus === 'Pte. Val. Técnica') { setSolicitudStatus('Pte. Val. Administrativa'); showToast('Avanzado a Pte. Val. Administrativa', 'success'); }
                else if (solicitudStatus === 'Pte. Val. Administrativa') { setSolicitudStatus('Pte. Pago'); showToast('Avanzado a Pte. Pago', 'success'); markComplete('federacion_validacion'); }
                else { showToast('Solicitud en estado final.', 'info'); }
            };
            const handleGenerarRemesa = () => {
                const selected = remesaItems.filter(i => i.selected && i.status === 'Pte. Pago');
                if (selected.length === 0) { showToast('Seleccione solicitudes pendientes.', 'warning'); return; }
                setRemesaItems(items => items.map(item => item.selected ? { ...item, status: 'Aceptada', selected: false } : item));
                showToast('Remesa Generada. Estados actualizados.', 'success'); markComplete('remesas');
            };
            const handleDummyAction = (msg) => showToast(msg || 'Acción simulada', 'info');

            // --- UI HELPERS ---
            const AppHeader = () => (
                <div className={`${COLORS.fiflpYellow} p-1 shadow-md select-none`}>
                    <div className="flex items-center justify-between mb-1 px-4 py-2">
                        <div className="flex items-center">
                            <FCFLogo />
                            <div className="hidden md:flex ml-8 space-x-6 text-xs font-semibold text-gray-800 items-center">
                                <div className="flex items-center cursor-pointer hover:text-white transition-colors"><Home size={16} className="mr-1"/> Principal</div>
                                <span className="hover:text-white cursor-pointer transition-colors">Adm. Portal</span>
                                <span className="hover:text-white cursor-pointer transition-colors">Federación</span>
                                <span className="bg-white text-[#F9B000] px-3 py-1 rounded-sm shadow-sm cursor-pointer font-bold border border-yellow-600">Agencias de viajes</span>
                                <span className="hover:text-white cursor-pointer transition-colors">Novanet</span>
                            </div>
                        </div>
                    </div>
                    <div className="bg-white py-1 px-4 flex space-x-6 text-xs text-gray-600 shadow-inner border-t border-yellow-500">
                        <div className="flex items-center cursor-pointer hover:text-orange-500 font-bold text-orange-500"><span>Agencias</span> <ChevronRight size={12} className="ml-1"/></div>
                        <div className="flex items-center cursor-pointer hover:text-orange-500 transition-colors"><span>Solicitudes</span> <ChevronRight size={12} className="ml-1"/></div>
                    </div>
                </div>
            );

            const FilterBox = ({ title, fields }) => (
                <div className="bg-white p-3 rounded shadow-sm border border-gray-200 mb-4">
                    <h3 className="text-[#00549F] text-xs font-bold mb-3 uppercase tracking-wide border-b pb-1 flex items-center"><Search size={12} className="mr-1"/> {title}</h3>
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-3 mb-3">
                        {fields.map((field, idx) => (
                            <div key={idx}>
                                <label className="text-[10px] font-bold text-gray-700 mb-1 block">{field.label}</label>
                                {field.type === 'select' ? <select className="w-full border border-gray-300 rounded-sm p-1 text-xs bg-gray-50 focus:border-blue-500 outline-none"><option>-- Seleccione --</option></select> : <input type="text" className="w-full border border-gray-300 rounded-sm p-1 text-xs focus:border-blue-500 outline-none" />}
                            </div>
                        ))}
                    </div>
                    <div className="flex justify-end space-x-2">
                        <button onClick={() => showToast('Filtros limpios', 'info')} className={`${COLORS.btnDarkGray} text-white px-3 py-1 text-xs rounded-sm hover:bg-gray-700 flex items-center transition-colors active:scale-95`}><Trash2 size={10} className="mr-1"/> Limpiar</button>
                        <button onClick={() => showToast('Buscando...', 'info')} className={`${COLORS.btnDarkGray} text-white px-3 py-1 text-xs rounded-sm hover:bg-gray-700 flex items-center transition-colors active:scale-95`}><Search size={10} className="mr-1"/> Consultar</button>
                    </div>
                </div>
            );

            const SplitLayout = ({ title, role, children, infoContent, businessRules, faqs, showOverlay }) => (
                <div className="flex flex-col lg:flex-row gap-6 h-full">
                    {/* LEFT COLUMN: KNOWLEDGE BASE */}
                    <div className="lg:w-1/3 flex flex-col space-y-4 overflow-y-auto pr-2 custom-scrollbar pb-10">
                        <div>
                            <div className="flex items-center justify-between">
                                <h2 className={`text-2xl font-bold ${COLORS.headerBlue} mb-1`}>{title}</h2>
                                {completedSections.has(activeSection) && <span className="text-green-600 font-bold text-xs bg-green-50 px-2 py-1 rounded border border-green-200 flex items-center"><CheckCircle size={12} className="mr-1"/> Completado</span>}
                            </div>
                            <div className={`w-12 h-1 ${COLORS.fiflpYellow} mb-3`}></div>
                            <RoleBadge role={role} />
                        </div>
                        
                        <div className="text-sm text-gray-700 space-y-4 leading-relaxed font-medium">
                            {infoContent}
                        </div>

                        {businessRules && <BusinessRule title="Reglas Críticas" rules={businessRules} />}

                        {faqs && faqs.length > 0 && (
                            <div className="bg-white rounded border border-gray-200 p-3 shadow-sm mt-4">
                                <h4 className="text-gray-500 text-xs font-bold uppercase border-b pb-2 mb-1 flex items-center"><HelpCircle size={12} className="mr-1"/> Preguntas Frecuentes</h4>
                                {faqs.map((faq, i) => <FAQItem key={i} {...faq} />)}
                            </div>
                        )}
                    </div>

                    {/* RIGHT COLUMN: UI REPLICA */}
                    <div className="lg:w-2/3 bg-gray-100 rounded-xl border border-gray-300 shadow-inner p-4 overflow-y-auto max-h-[800px] relative group">
                        <div className="bg-white shadow-xl rounded overflow-hidden border border-gray-300 min-h-[500px] transform transition-all duration-300 relative">
                            {children}
                            {showOverlay && showCelebration && <CelebrationOverlay onDismiss={() => setShowCelebration(false)}/>}
                        </div>
                    </div>
                </div>
            );

            // --- RENDER CONTENT SWITCH ---
            const renderContent = () => {
                switch (activeSection) {
                    case 'intro':
                        return (
                            <div className="max-w-3xl mx-auto text-center space-y-8 pt-10">
                                <div className="relative inline-block scale-150 mb-8 p-4"><FCFLogo /></div>
                                <h1 className="text-4xl font-extrabold text-[#00549F] tracking-tight">Base de Conocimiento: Agencias</h1>
                                <p className="text-lg text-gray-600 max-w-xl mx-auto">Plataforma de formación interactiva sobre el sistema de gestión de viajes de la FIFLP. Selecciona un módulo para comenzar.</p>
                                
                                <div className="flex justify-center mt-6 mb-8">
                                    <div className="bg-white px-6 py-3 rounded-full shadow border border-gray-200 flex items-center space-x-4">
                                        <span className="text-xs font-bold text-gray-500 uppercase">Progreso Global:</span>
                                        <div className="flex space-x-1">
                                            {['agencia_alta', 'solicitudes_crear', 'federacion_validacion', 'remesas'].map((sec) => (
                                                <div key={sec} className={`h-2 w-8 rounded-sm ${completedSections.has(sec) ? 'bg-green-500' : 'bg-gray-300'}`}></div>
                                            ))}
                                        </div>
                                        <span className="text-sm font-bold text-[#00549F]">{Math.round((completedSections.size / 4) * 100)}%</span>
                                    </div>
                                </div>
                            </div>
                        );

                    case 'agencia_alta':
                        return (
                            <SplitLayout
                                title="Gestión de Agencias"
                                role="Federación"
                                showOverlay={true}
                                infoContent={
                                    <>
                                        <p>Desde este panel, la Federación gestiona el alta y mantenimiento de las agencias de viajes autorizadas.</p>
                                        <div className="mt-2 bg-blue-50 p-2 rounded text-xs border border-blue-100">
                                            <strong>Ruta:</strong> Agencias de viaje → Agencias → Listado de Agencia
                                        </div>
                                        <p className="mt-2 text-xs text-gray-500">Nota: Los campos marcados en <span className="bg-[#FADBD8] px-1 rounded text-red-800 font-bold">ROSA</span> son obligatorios para el guardado.</p>
                                    </>
                                }
                                businessRules={[
                                    "Es obligatorio grabar los datos básicos antes de adjuntar documentos.",
                                    "Documentos requeridos: Titularidad de representación y Cuenta bancaria.",
                                    "Se deben asignar explícitamente los clubes que gestionará la agencia (Pestaña 'Clubes Asociados').",
                                    "Sin clubes asociados, la agencia no verá ningún partido."
                                ]}
                                faqs={[
                                    { question: "¿Por qué no puedo subir documentos?", answer: "El botón de subida se habilita solo después de haber pulsado 'Grabar' por primera vez." },
                                    { question: "¿Puedo borrar una agencia?", answer: "No directamente. Debe contactar con soporte para bajas lógicas si ya tiene historial." }
                                ]}
                            >
                                {/* UI REPLICA - AGENCIA ALTA */}
                                <div className="bg-[#EEEEEE] h-full flex flex-col font-sans">
                                    <AppHeader />
                                    <div className="p-4 flex-1 overflow-y-auto">
                                        <div className="mb-6">
                                            <h2 className="text-[#00549F] font-bold text-base mb-2 uppercase">Listado Agencias</h2>
                                            <div className="mb-2">
                                                <button onClick={() => handleDummyAction('Creando nueva agencia...')} className={`${COLORS.btnGreen} ${COLORS.btnGreenHover} text-white px-3 py-1 rounded-sm text-xs font-bold shadow flex items-center transition-transform active:scale-95`}>
                                                    Nueva Agencia <Plus size={12} className="ml-1"/>
                                                </button>
                                            </div>
                                            <div className="bg-white rounded-sm shadow-sm overflow-hidden border border-gray-300">
                                                <div className="bg-white p-3 border-b">
                                                    <label className="text-xs font-bold text-gray-600 block mb-1">Nombre</label>
                                                    <input className="border border-gray-300 rounded-sm p-1 text-xs w-1/3" />
                                                    <div className="mt-2 flex space-x-2">
                                                        <button onClick={() => showToast('Limpiando filtros', 'info')} className={`${COLORS.btnDarkGray} text-white px-3 py-1 rounded-sm text-xs flex items-center hover:bg-gray-700 active:scale-95`}><Trash2 size={10} className="mr-1"/> Limpiar</button>
                                                        <button onClick={() => showToast('Consultando...', 'info')} className={`${COLORS.btnDarkGray} text-white px-3 py-1 rounded-sm text-xs flex items-center hover:bg-gray-700 active:scale-95`}><Search size={10} className="mr-1"/> Consultar</button>
                                                    </div>
                                                </div>
                                                <table className="w-full text-xs">
                                                    <thead className={`${COLORS.tableHeader} text-white`}><tr><th className="p-2 text-left font-bold">Nº Agencia</th><th className="p-2 text-left font-bold">Nombre</th><th className="p-2 text-center font-bold">Acciones</th></tr></thead>
                                                    <tbody><tr className="border-b bg-white hover:bg-gray-50"><td className="p-2">31</td><td className="p-2">Agencia Test</td><td className="p-2 text-center"><Edit size={14} className="text-gray-500 inline cursor-pointer hover:text-blue-600"/></td></tr></tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div className="bg-white border-t-4 border-[#F9B000] rounded-sm shadow-lg">
                                            <div className="bg-[#F9B000] px-3 py-2 flex justify-between items-center"><span className="text-white font-bold text-sm">Listado Agencias [Edición]</span><Settings size={14} className="text-white"/></div>
                                            <div className="flex px-2 pt-2 border-b border-gray-200">
                                                <button onClick={() => setActiveTab('datos')} className={`px-4 py-2 text-xs font-bold rounded-t-md mr-1 transition-colors ${activeTab === 'datos' ? COLORS.tabActive : COLORS.tabInactive}`}>Datos Agencia</button>
                                                <button onClick={() => setActiveTab('clubes')} className={`px-4 py-2 text-xs font-bold rounded-t-md mr-1 transition-colors ${activeTab === 'clubes' ? COLORS.tabActive : COLORS.tabInactive}`}>Clubes Asociados</button>
                                            </div>
                                            <div className="p-4 relative min-h-[350px]">
                                                {activeTab === 'datos' ? (
                                                    <div className="space-y-4">
                                                        <div className="border-b pb-1 mb-2"><h4 className="text-gray-500 font-bold text-xs uppercase">Agencia</h4></div>
                                                        <div className="grid grid-cols-1 gap-3">
                                                            <div className="flex items-center"><label className="w-24 text-[11px] font-bold text-gray-700">Nombre: *</label><input name="nombre" value={formAgencia.nombre} onChange={handleAgenciaChange} className={`flex-1 border border-gray-300 rounded-sm p-1 text-xs ${!formAgencia.nombre ? COLORS.inputMandatory : 'bg-white'}`} /></div>
                                                            <div className="flex space-x-4"><div className="flex items-center flex-1"><label className="w-24 text-[11px] font-bold text-gray-700">Teléfono: *</label><input name="telefono" value={formAgencia.telefono} onChange={handleAgenciaChange} className={`flex-1 border border-gray-300 rounded-sm p-1 text-xs ${!formAgencia.telefono ? COLORS.inputMandatory : 'bg-white'}`} /></div><div className="flex items-center flex-1"><label className="w-10 text-[11px] font-bold text-gray-700">CIF: *</label><input name="cif" value={formAgencia.cif} onChange={handleAgenciaChange} className={`flex-1 border border-gray-300 rounded-sm p-1 text-xs ${!formAgencia.cif ? COLORS.inputMandatory : 'bg-white'}`} /></div></div>
                                                            <div className="flex items-center"><label className="w-24 text-[11px] font-bold text-gray-700">E-mail: *</label><input name="email" value={formAgencia.email} onChange={handleAgenciaChange} className={`flex-1 border border-gray-300 rounded-sm p-1 text-xs ${!formAgencia.email ? COLORS.inputMandatory : 'bg-white'}`} /></div>
                                                        </div>
                                                        <div className="border-t pt-2 mt-2">
                                                            <p className="text-[10px] text-gray-500 mb-2">{formAgencia.isSaved ? "Adjuntar archivos:" : "No hay documentos (Grabe primero)"}</p>
                                                            <button onClick={handleUploadDocs} className={`px-3 py-1 rounded-sm text-xs flex items-center shadow transition-colors ${formAgencia.isSaved ? 'bg-[#337AB7] text-white hover:bg-blue-600 active:scale-95' : 'bg-gray-300 text-gray-500 cursor-not-allowed'}`}><Upload size={10} className="mr-1"/> Subir Documentos</button>
                                                        </div>
                                                    </div>
                                                ) : (
                                                    <div className="space-y-3">
                                                        <div className="bg-[#FCF8E3] text-[#8A6D3B] p-2 text-xs border border-[#FAEBCC] rounded-sm">Asignar clubes para limitar acceso a actas.</div>
                                                        <div className="flex gap-2 items-start mt-2">
                                                            <div className="w-1/2">
                                                                <label className="text-[10px] font-bold block mb-1">Federación:</label><select className="w-full border p-1 text-xs mb-2"><option>Federación Canaria (Tinerfeña)</option></select>
                                                                <div className="border h-32 bg-white rounded-sm overflow-y-auto p-1"><div className="text-[10px] hover:bg-blue-100 cursor-pointer px-1">C.D. Tenerife</div><div className="text-[10px] hover:bg-blue-100 cursor-pointer px-1">U.D. Las Palmas</div></div>
                                                            </div>
                                                            <div className="flex flex-col space-y-1 pt-6"><button onClick={() => handleDummyAction('Club añadido')} className={`${COLORS.btnDarkGray} text-white p-1 rounded-sm text-[10px] w-16 hover:bg-gray-700 active:scale-95`}>Añadir {">>"}</button><button onClick={() => handleDummyAction('Club eliminado')} className={`${COLORS.btnDarkGray} text-white p-1 rounded-sm text-[10px] w-16 hover:bg-gray-700 active:scale-95`}>{"<<"} Eliminar</button></div>
                                                            <div className="w-1/2 pt-6"><div className="border h-32 bg-white rounded-sm"></div></div>
                                                        </div>
                                                    </div>
                                                )}
                                                <div className="absolute bottom-4 right-4"><button onClick={handleSaveAgencia} className={`${COLORS.btnGreen} ${COLORS.btnGreenHover} text-white px-4 py-2 rounded-sm text-sm font-bold shadow flex items-center transition-transform active:scale-95`}>Grabar <CheckCircle size={14} className="ml-2"/></button></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </SplitLayout>
                        );

                    case 'solicitudes_crear':
                        return (
                            <SplitLayout
                                title="Crear Solicitud"
                                role="Agencia"
                                showOverlay={true}
                                infoContent={
                                    <>
                                        <p>Las agencias inician el proceso de subvención creando solicitudes para partidos específicos.</p>
                                        <div className="mt-2 bg-blue-50 p-2 rounded text-xs border border-blue-100">
                                            <strong>Ruta:</strong> Solicitudes → Listado de solicitudes → Nueva solicitud
                                        </div>
                                    </>
                                }
                                businessRules={[
                                    "El sistema calcula automáticamente la tarifa y el precio máximo.",
                                    "Fútbol: Máximo 16 jugadores.",
                                    "Fútbol Sala: Máximo 12 jugadores.",
                                    "Auxiliares: Máximo 2.",
                                    "No Jugadores: Máximo 2 (Directivos).",
                                    "Si finalizas la solicitud, ya no podrás editarla (pasa a validación)."
                                ]}
                                faqs={[
                                    { question: "¿Qué pasa si me equivoco de jugador?", answer: "Si la solicitud está 'En Tramitación', puedes editar. Si está 'Finalizada', debes pedir a la Federación que la devuelva a 'Subsanación'." },
                                    { question: "¿Por qué me da error al añadir directivos?", answer: "El sistema bloquea si intentas añadir más de 2 personas en la pestaña 'No Jugadores'." }
                                ]}
                            >
                                {/* UI REPLICA - SOLICITUDES */}
                                <div className="bg-[#EEEEEE] h-full flex flex-col font-sans">
                                    <AppHeader />
                                    <div className="p-4 flex-1 overflow-y-auto">
                                        <div className="flex justify-between items-center mb-4">
                                            <h2 className="text-[#00549F] font-bold text-base uppercase">Listado Solicitudes</h2>
                                            <button onClick={() => handleDummyAction('Creando nueva solicitud')} className={`${COLORS.btnGreen} text-white px-3 py-1 rounded-sm text-xs font-bold shadow hover:bg-green-800 active:scale-95`}>Nueva solicitud +</button>
                                        </div>
                                        <div className="bg-white p-4 border rounded-sm shadow-sm">
                                            <div className="grid grid-cols-2 gap-4 mb-4 bg-[#F5F5F5] p-3 rounded-sm border">
                                                <div><label className="text-[11px] font-bold text-gray-700 block">Federación:</label><select className="w-full border p-1 text-xs"><option>Tinerfeña</option></select></div>
                                                <div><label className="text-[11px] font-bold text-gray-700 block">Competiciones:</label><select className="w-full border p-1 text-xs"><option>PRIMERA DIVISIÓN REGIONAL</option></select></div>
                                            </div>
                                            <div className="border p-3 rounded-sm mb-4">
                                                <div className="flex space-x-4 mb-2">
                                                    <div className="flex-1"><label className="text-[11px] font-bold block">Método:</label><select className="w-full border p-1 text-xs"><option>Avión</option></select></div>
                                                    <div className="flex-1"><label className="text-[11px] font-bold block">Origen:</label><select className="w-full border p-1 text-xs"><option>Lanzarote</option></select></div>
                                                    <div className="flex-1"><label className="text-[11px] font-bold block">Destino:</label><select className="w-full border p-1 text-xs"><option>Tenerife</option></select></div>
                                                </div>
                                                <div className="flex items-end space-x-4 mt-3">
                                                    <div className="w-1/4"><label className="text-[11px] font-bold block">Precio máx:</label><input className="w-full border border-blue-400 p-1 text-xs font-bold text-right" value="46.00" readOnly/></div>
                                                    <div className="flex-1 text-right"><button onClick={() => handleDummyAction('Jugadores cargados')} className={`${COLORS.btnGreen} text-white px-4 py-2 rounded-sm text-xs font-bold shadow hover:bg-green-800 active:scale-95`}>Cargar Información de participantes</button></div>
                                                </div>
                                            </div>
                                            <div>
                                                <div className="flex border-b border-gray-300 mb-2">
                                                    <button onClick={() => setActiveRequestTab('jugadores')} className={`px-4 py-2 text-xs font-bold rounded-t-sm mr-1 ${activeRequestTab === 'jugadores' ? COLORS.tabActive : COLORS.tabInactive}`}>Jugadores</button>
                                                    <button onClick={() => setActiveRequestTab('nojugadores')} className={`px-4 py-2 text-xs font-bold rounded-t-sm mr-1 ${activeRequestTab === 'nojugadores' ? COLORS.tabActive : COLORS.tabInactive}`}>No Jugadores</button>
                                                </div>
                                                {activeRequestTab === 'jugadores' && (
                                                    <div className="border rounded-sm overflow-hidden mb-4">
                                                        <table className="w-full text-xs">
                                                            <thead className={`${COLORS.tableHeader} text-white`}><tr><th className="p-2 w-8"></th><th className="p-2">Licencia</th><th className="p-2">Identificador</th><th className="p-2">Nombre</th><th className="p-2">Precio</th></tr></thead>
                                                            <tbody>{[1,2,3].map(i => (<tr key={i} className="border-b hover:bg-gray-50"><td className="p-2 text-center"><input type="checkbox" defaultChecked className="accent-[#F9B000] w-4 h-4 rounded-sm" /></td><td className="p-2 text-center">{i}</td><td className="p-2">7908520{i}Y</td><td className="p-2 font-bold text-gray-700">JUGADOR {i}</td><td className="p-2"><input className="border w-16 text-right p-0.5" defaultValue="46,00" /></td></tr>))}</tbody>
                                                        </table>
                                                    </div>
                                                )}
                                            </div>
                                            <div className="grid grid-cols-3 gap-2 text-xs mb-2">
                                                <div><label className="font-bold block">Nº Factura:</label><input className="border w-full p-1"/></div>
                                                <div><label className="font-bold block">Total Factura:</label><input className="border w-full p-1"/></div>
                                                <div><label className="font-bold block">Fecha Factura:</label><input type="date" className="border w-full p-1"/></div>
                                            </div>
                                            <div className="flex space-x-2 text-xs mb-4">
                                                <button className="bg-gray-500 text-white px-2 py-1 rounded flex items-center hover:bg-gray-600 active:scale-95"><Upload size={10} className="mr-1"/> Fichero Factura</button>
                                                <button className="bg-gray-500 text-white px-2 py-1 rounded flex items-center hover:bg-gray-600 active:scale-95"><Upload size={10} className="mr-1"/> Fichero Modelo 48</button>
                                            </div>
                                            <div><label className="text-xs font-bold block">Comentarios Agencia:</label><textarea className="border w-full h-12 text-xs p-1"></textarea></div>
                                            <div className="mt-4 flex justify-end space-x-2 border-t pt-4">
                                                <button onClick={() => showToast('Guardado. Estado: En tramitación', 'info')} className="bg-[#F0AD4E] text-white px-4 py-2 rounded-sm text-xs font-bold shadow hover:bg-yellow-600 active:scale-95">Guardar Solicitud +</button>
                                                <button onClick={() => { showToast('Enviado. Estado: Pte. Val. Técnica', 'success'); markComplete('solicitudes_crear'); }} className={`${COLORS.btnGreen} text-white px-4 py-2 rounded-sm text-xs font-bold shadow hover:bg-green-800 flex items-center active:scale-95`}>Finalizar Solicitud <CheckCircle size={14} className="ml-1"/></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </SplitLayout>
                        );

                    case 'federacion_validacion':
                        return (
                            <SplitLayout
                                title="Validación Federación"
                                role="Federación"
                                showOverlay={true}
                                infoContent={
                                    <>
                                        <p>La Federación revisa las solicitudes en cola. Este es el núcleo del control administrativo.</p>
                                        <div className="bg-gray-100 p-2 text-xs border rounded mt-2">
                                            <strong>Ciclo de Estados:</strong>
                                            <ol className="list-decimal list-inside mt-1">
                                                <li>Tramitación (Agencia)</li>
                                                <li>Pte. validación técnica (Fed)</li>
                                                <li>Pte. validación administrativa (Fed)</li>
                                                <li>Pte. de pago (Fed)</li>
                                            </ol>
                                        </div>
                                    </>
                                }
                                businessRules={[
                                    "Estado 'Subsanar': Devuelve la solicitud a la agencia para que corrija errores (se verán en amarillo).",
                                    "Estado 'Rechazar': Cancela la solicitud definitivamente.",
                                    "Solo las solicitudes en 'Pte. de Pago' pueden incluirse en remesas.",
                                    "La validación es secuencial: Técnica -> Administrativa -> Pago."
                                ]}
                                faqs={[
                                    { question: "¿Puedo saltarme la validación técnica?", answer: "No, el sistema obliga a pasar por cada estado en orden." },
                                    { question: "¿Qué ve la agencia cuando subsano?", answer: "Ven el estado 'Subsanación' y los comentarios que escribas en el cuadro de texto." }
                                ]}
                            >
                                {/* UI REPLICA - VALIDACION */}
                                <div className="bg-[#EEEEEE] h-full flex flex-col font-sans">
                                    <AppHeader />
                                    <div className="p-4 flex-1 overflow-y-auto">
                                        <h2 className="text-[#00549F] font-bold text-base uppercase mb-4">Listado Solicitudes</h2>
                                        <FilterBox title="Filtro de búsqueda" fields={[{label: 'Federación', type: 'select'}, {label: 'Estado', type: 'select'}]} />
                                        <div className="bg-white rounded-sm shadow-sm overflow-hidden border">
                                            <table className="w-full text-[10px] uppercase text-center">
                                                <thead className={`${COLORS.tableHeader} text-white font-bold`}><tr><th className="p-2">Nº Solicitud</th><th className="p-2">Agencia</th><th className="p-2">Local vs Visitante</th><th className="p-2">Estado</th><th className="p-2">Acciones</th></tr></thead>
                                                <tbody className="divide-y divide-gray-200"><tr className="bg-blue-50/50 border-2 border-blue-400"><td className="p-2 font-bold">60</td><td className="p-2 font-bold">Agencia Test</td><td className="p-2">VALLE GUERRA - TACORONTE</td><td className="p-2 font-bold text-[#D35400]">{solicitudStatus.toUpperCase()}</td><td className="p-2"><button className="bg-[#478945] text-white p-1 rounded-sm"><Edit size={12}/></button></td></tr></tbody>
                                            </table>
                                        </div>
                                        <div className="mt-4 bg-white border rounded-sm p-4 shadow-sm">
                                            <h4 className="text-red-700 font-bold text-xs mb-2">Edición Solicitud #60</h4>
                                            <div className="flex space-x-4 mb-2">
                                                <div className="w-1/2"><label className="text-[10px] font-bold block text-gray-600">Cambiar Estado/Acción:</label><select className="border w-full text-xs p-1" value={validacionAction} onChange={(e) => setValidacionAction(e.target.value)}><option value="Validar">Validar (Avanzar estado)</option><option value="Subsanar">Subsanación (Devolver)</option><option value="Rechazar">Rechazar</option></select></div>
                                            </div>
                                            <div className="mb-2"><label className="text-[10px] font-bold block text-gray-600">Comentarios Federación:</label><textarea className="border w-full h-16 text-xs p-1 bg-gray-50" placeholder="Escriba aquí los motivos..."></textarea></div>
                                            <div className="flex justify-end space-x-2">
                                                <button onClick={() => showToast('Estado guardado (borrador)', 'info')} className="bg-[#F0AD4E] text-white px-3 py-1 text-xs font-bold rounded-sm shadow hover:bg-yellow-600 active:scale-95">Guardar estado</button>
                                                <button onClick={handleValidate} className="bg-[#478945] text-white px-3 py-1 text-xs font-bold rounded-sm shadow flex items-center hover:bg-green-800 active:scale-95">Ejecutar Acción <CheckCircle size={12} className="ml-1"/></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </SplitLayout>
                        );

                    case 'remesas':
                        return (
                            <SplitLayout
                                title="Generación de Remesas"
                                role="Federación"
                                showOverlay={true}
                                infoContent={
                                    <>
                                        <p>El paso final para realizar el pago. Se agrupan múltiples solicitudes aprobadas en un lote (remesa).</p>
                                        <div className="mt-2 bg-green-50 p-2 rounded text-xs border border-green-100">
                                            <strong>Acción Clave:</strong> Al generar la remesa, las solicitudes pasan automáticamente a estado <span className="text-green-700 font-bold">ACEPTADA</span>.
                                        </div>
                                    </>
                                }
                                businessRules={[
                                    "Solo aparecen solicitudes en estado 'Pendiente de Pago'.",
                                    "Una vez generada la remesa, no se puede deshacer desde esta pantalla.",
                                    "Se generan archivos para el Banco (TXT/Excel) y para Contabilidad interna."
                                ]}
                                faqs={[
                                    { question: "¿Dónde veo las remesas antiguas?", answer: "En el listado inferior, debajo de los filtros." },
                                    { question: "¿Cómo pago solo una parte?", answer: "Selecciona solo los checkboxes de las solicitudes que quieras incluir en esta remesa específica." }
                                ]}
                            >
                                {/* UI REPLICA - REMESAS */}
                                <div className="bg-[#EEEEEE] h-full flex flex-col font-sans">
                                    <AppHeader />
                                    <div className="p-4 flex-1 overflow-y-auto">
                                        <div className="flex justify-between items-center mb-2">
                                            <div className="flex space-x-1"></div>
                                            <div className="flex space-x-1">
                                                <button onClick={() => handleDummyAction('Descargando informes...')} className="bg-[#555] text-white px-2 py-1 text-[10px] rounded-sm font-bold flex items-center hover:bg-gray-700 active:scale-95">Descargar Informes <ChevronRight size={10}/></button>
                                                <button onClick={handleGenerarRemesa} className="bg-black text-white px-3 py-1 text-[10px] rounded-sm font-bold shadow hover:bg-gray-800 border border-gray-600 active:scale-95">Generar Remesa</button>
                                            </div>
                                        </div>
                                        <FilterBox title="Filtro de búsqueda" fields={[{label: 'Federación', type: 'select'}, {label: 'Estado', type: 'select', placeholder: 'Pendiente Pago'}]} />
                                        <div className="bg-white border rounded-sm shadow-sm overflow-hidden">
                                            <table className="w-full text-[10px] text-center uppercase">
                                                <thead className={`${COLORS.tableHeader} text-white font-bold`}><tr><th className="p-2 w-8"></th><th className="p-2">Nº Solicitud</th><th className="p-2">Agencia</th><th className="p-2">Local</th><th className="p-2">Visitante</th><th className="p-2">Estado</th><th className="p-2">Acciones</th></tr></thead>
                                                <tbody className="divide-y">
                                                    {remesaItems.map(item => (
                                                        <tr key={item.id} className="bg-white hover:bg-yellow-50">
                                                            <td className="p-2"><input type="checkbox" checked={item.selected} disabled={item.status === 'Aceptada'} onChange={() => { setRemesaItems(remesaItems.map(i => i.id === item.id ? {...i, selected: !i.selected} : i)); }} className="accent-[#F9B000]" /></td>
                                                            <td className="p-2">{item.id}</td><td className="p-2">Agencia Test</td><td className="p-2">{item.local}</td><td className="p-2">{item.visitante}</td>
                                                            <td className="p-2 font-bold text-[#F39C12]">{item.status === 'Aceptada' ? <span className="text-green-600">ACEPTADA</span> : 'PTE. PAGO'}</td>
                                                            <td className="p-2 flex justify-center space-x-1"><button onClick={() => handleDummyAction('Descargando factura...')} className="bg-[#555] text-white p-1 rounded-sm hover:bg-gray-700 active:scale-95"><FileText size={10}/></button></td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </SplitLayout>
                        );

                    default: return <div>Sección no encontrada</div>;
                }
            };

            const NavItem = ({ item }) => (
                <button onClick={() => setActiveSection(item.id)} className={`w-full flex items-center justify-between px-4 py-3 text-left transition-all duration-200 border-l-4 group border-transparent hover:bg-gray-50 ${activeSection === item.id ? 'border-[#00549F] bg-blue-50 text-[#00549F] font-bold' : 'text-gray-500'}`}>
                    <div className="flex items-center space-x-3"><item.icon size={18} className={`transition-transform group-hover:scale-110 ${activeSection === item.id ? "text-[#00549F]" : "text-gray-400"}`} /><span className="text-sm">{item.label}</span></div>
                    {completedSections.has(item.id) && <CheckCircle size={16} className="text-green-500" />}
                </button>
            );

            return (
                <div className="flex flex-col md:flex-row h-screen bg-gray-100 font-sans overflow-hidden">
                    {toast && <Toast message={toast.message} type={toast.type} onClose={() => setToast(null)} />}
                    <div className="w-full md:w-64 bg-white shadow-xl z-20 flex flex-col border-r border-gray-200">
                        <div className="p-6 bg-[#00549F] text-white shadow-inner">
                            <h1 className="font-bold text-lg flex items-center italic"><span className="font-black mr-2">FCF</span> Manual</h1>
                            <p className="text-[10px] text-blue-200 mt-1 uppercase tracking-wider font-semibold">Knowledge Base v8.0</p>
                        </div>
                        <div className="px-4 py-2 border-b border-gray-100 bg-gray-50">
                            <div className="flex items-center bg-white border rounded-md px-2 py-1"><Search size={14} className="text-gray-400"/><input className="bg-transparent border-none text-xs w-full ml-2 focus:outline-none" placeholder="Buscar temas..." value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)}/></div>
                        </div>
                        <nav className="flex-1 py-4 space-y-1 overflow-y-auto">
                            {filteredMenu.map(item => <NavItem key={item.id} item={item} />)}
                        </nav>
                        <div className="p-4 border-t text-[10px] text-gray-400 text-center bg-gray-50">© 2025 Novanet / FIFLP</div>
                    </div>
                    <div className="flex-1 p-4 md:p-6 overflow-hidden bg-gray-200/50">
                        <div className="h-full bg-white rounded-xl shadow-lg border border-gray-200 p-6 overflow-hidden">{renderContent()}</div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ManualAgencias />);
    </script>
</body>
</html>
